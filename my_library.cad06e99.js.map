{"mappings":"iiBAAA,IAAAA,EAAAC,EAAA,S,uCAGMC,EAAUC,SAASC,cAAc,YACjCC,EAAQF,SAASC,cAAc,U,SAEtBE,I,OAAAC,EAAiBC,MAAAC,KAAAC,U,UAAjBH,I,OAAAA,EAAfI,EAAAX,EAAA,CAAAW,EAAAC,GAAAC,MAAA,SAAAC,I,IACQC,EAKMC,EACAC,E,yEAJHF,GAFHA,EAAmBG,aAAaC,QAAQ,YAElBC,KAAKC,MAAMN,GADO,G,mBAIZ,EAAAO,EAAAC,wBAAuBR,G,OAA7CC,EAAaQ,EAAAC,KACbR,EAASD,EAAcU,KAAI,SAAAC,GAC7B,OAAO,EAAAC,EAAAC,eAAcF,E,IACtBG,KAAK,IAEmB3B,SAASC,cAAc,cAC/B2B,UAAYd,E,kDAE/Be,QAAQC,IAAGT,EAAAU,I,2DAda1B,MAAAC,KAAAC,U,UAkBjByB,I,OAAAC,EAAgB5B,MAAAC,KAAAC,U,UAAhB0B,I,OAAAA,EAAfzB,EAAAX,EAAA,CAAAW,EAAAC,GAAAC,MAAA,SAAAC,I,IACQuB,EAKMrB,EACAC,E,yEAJHoB,GAFHA,EAAkBnB,aAAaC,QAAQ,UAElBC,KAAKC,MAAMgB,GADM,G,mBAIV,EAAAf,EAAAC,wBAAuBc,G,OAA7CrB,EAAaQ,EAAAC,KACbR,EAASD,EAAcU,KAAI,SAAAC,GAC7B,OAAO,EAAAC,EAAAC,eAAcF,E,IACtBG,KAAK,IAEmB3B,SAASC,cAAc,cAC/B2B,UAAYd,E,kDAE/Be,QAAQC,IAAGT,EAAAU,I,2DAdY1B,MAAAC,KAAAC,U,CAkB/B,SAAS4B,IACLpC,EAAQqC,UAAUC,OAAO,cACzBnC,EAAMkC,UAAUE,IAAI,cACpBN,G,CASJG,IACApC,EAAQwC,iBAAiB,SAPzB,WACIxC,EAAQqC,UAAUE,IAAI,cACtBpC,EAAMkC,UAAUC,OAAO,cACvBlC,G,IAKJD,EAAMqC,iBAAiB,QAASJ,G,WCtDhC,IAAMK,EAAO,CACTC,aAAczC,SAASC,cAAc,qBACrCyC,cAAe1C,SAASC,cAAc,sBACtC0C,MAAO3C,SAASC,cAAc,gBAC9B2C,KAAM5C,SAASC,cAAc,SAYjC,SAAS4C,IAeL,IAZiF,GAFvEC,OAAOC,SAASC,KAElBC,QAAQ,+DACZH,OAAOC,SAASG,QAAO,GAE3BV,EAAKI,KAAKR,UAAUC,OAAO,YAC3BS,OAAOK,oBAAoB,UAAWC,GACtCZ,EAAKG,MAAMP,UAAUE,IAAI,cAMZtC,SAASC,cAAc,WACzB,CACP,IAAMoD,EAAUrD,SAASC,cAAc,YACjCqD,EAAQtD,SAASC,cAAc,UAEjCoD,EAAQjB,UAAUmB,SAAS,gBAC3B1B,QAAQC,IAAI,SACZ3B,KAEAmD,EAAMlB,UAAUmB,SAAS,gBACzB1B,QAAQC,IAAI,SACZE,I,EAWZ,SAASoB,EAAWI,GACF,WAAVA,EAAEC,KACFZ,G,CA/CRL,EAAKG,MAAMJ,iBAAiB,SAuC5B,SAAyBiB,GACjBA,EAAEE,gBAAkBF,EAAEG,QACtBd,G,IAxCRC,OAAOP,iBAAiB,UAAWa,G","sources":["src/js/get-content/my-lib-btn-clicks.js","src/js/modal-windows/open-close-my_lib-movie-modal.js"],"sourcesContent":["import { oneCardMarkup } from '../components/one-card-markup'\nimport { getTheMoviesTargetInfo } from \"./get-movies-target-info\"\n\nconst watched = document.querySelector('#watched')\nconst queue = document.querySelector('#queue')\n\nasync function loadWatchedMovies() {\n    let watchedMoviesIds = localStorage.getItem(\"watched\")\n    if (!watchedMoviesIds) { watchedMoviesIds = {} }\n    else { watchedMoviesIds = JSON.parse(watchedMoviesIds) }\n\n    try {\n        const filmsToRender = await getTheMoviesTargetInfo(watchedMoviesIds)\n        const markup = filmsToRender.map(film => {\n            return oneCardMarkup(film)\n        }).join('');\n\n        const containerMyLibPage = document.querySelector('.film-grid');\n        containerMyLibPage.innerHTML = markup\n    } catch (error) {\n        console.log(error)\n    }\n}\n\nasync function loadQueuedMovies() {    \n    let queuedMoviesIds = localStorage.getItem(\"queue\")\n    if (!queuedMoviesIds) { queuedMoviesIds = {} }\n    else { queuedMoviesIds = JSON.parse(queuedMoviesIds) }\n\n    try {\n        const filmsToRender = await getTheMoviesTargetInfo(queuedMoviesIds)\n        const markup = filmsToRender.map(film => {\n            return oneCardMarkup(film)\n        }).join('');\n\n        const containerMyLibPage = document.querySelector('.film-grid');\n        containerMyLibPage.innerHTML = markup\n    } catch (error) {\n        console.log(error)\n    }\n}\n\nfunction onQueue () {\n    watched.classList.remove('active-btn')\n    queue.classList.add('active-btn')\n    loadQueuedMovies()\n}\n\nfunction onWatched () {\n    watched.classList.add('active-btn')\n    queue.classList.remove('active-btn')\n    loadWatchedMovies()\n}\n\nonQueue()\nwatched.addEventListener('click', onWatched)\nqueue.addEventListener('click', onQueue)\n\nexport { loadQueuedMovies, loadWatchedMovies, }","import { loadWatchedMovies, loadQueuedMovies } from \"../get-content/my-lib-btn-clicks\";\n\nconst refs = {\n    openModalBtn: document.querySelector('[data-modal-open]'),\n    closeModalBtn: document.querySelector('[data-modal-close]'),\n    modal: document.querySelector('[data-modal]'),\n    body: document.querySelector('body'),\n};\n\nrefs.modal.addEventListener('click', onBackdropClick);\nwindow.addEventListener('keydown', onEscClose);\n\nfunction showModalMovieWindow() {\n    refs.body.classList.add('overflow');\n    window.addEventListener('keydown', onEscClose);\n    refs.modal.classList.remove('is-hidden');\n}\n\nfunction hideModalMovieWindow() {\n    let url = window.location.href;\n    if (\n        url.indexOf('https://peteryurich.github.io/filmoteka_08/my_library.html') != -1) {\n        window.location.reload(true);\n    }\n    refs.body.classList.remove('overflow');\n    window.removeEventListener('keydown', onEscClose);\n    refs.modal.classList.add('is-hidden');\n\n    // if (url.indexOf('http://localhost:1234/my_library.html') != -1) {\n    //   window.location.reload(true);\n    // }\n\n    const form = document.querySelector(\".search\")\n    if (!form) {\n        const watched = document.querySelector('#watched')\n        const queue = document.querySelector('#queue')\n\n        if (watched.classList.contains(\"active-btn\")) {\n            console.log(\"watch\")\n            loadWatchedMovies()\n        }\n        if (queue.classList.contains(\"active-btn\")) {\n            console.log(\"wueue\")\n            loadQueuedMovies()\n        }\n    }\n}\n\nfunction onBackdropClick(e) {\n    if (e.currentTarget === e.target) {\n        hideModalMovieWindow();\n    }\n}\n\nfunction onEscClose(e) {\n    if (e.key === 'Escape') {\n        hideModalMovieWindow();\n    }\n}\n\nexport { showModalMovieWindow, hideModalMovieWindow }"],"names":["$bpxeT","parcelRequire","$bcabdb5f54ab5d52$var$watched","document","querySelector","$bcabdb5f54ab5d52$var$queue","$bcabdb5f54ab5d52$export$f99fab56a46c62ee","$bcabdb5f54ab5d52$var$_loadWatchedMovies","apply","this","arguments","$parcel$interopDefault","$2TvXO","mark","_callee","watchedMoviesIds","filmsToRender","markup","localStorage","getItem","JSON","parse","$8VB7B","getTheMoviesTargetInfo","_ctx","sent","map","film","$cGXL9","oneCardMarkup","join","innerHTML","console","log","t0","$bcabdb5f54ab5d52$export$1c35a62a60101ee","$bcabdb5f54ab5d52$var$_loadQueuedMovies","queuedMoviesIds","$bcabdb5f54ab5d52$var$onQueue","classList","remove","add","addEventListener","$f5f6a4376c89b822$var$refs","openModalBtn","closeModalBtn","modal","body","$f5f6a4376c89b822$export$cc81713dc4c30e0c","window","location","href","indexOf","reload","removeEventListener","$f5f6a4376c89b822$var$onEscClose","watched","queue","contains","e","key","currentTarget","target"],"version":3,"file":"my_library.cad06e99.js.map"}